var j=Object.defineProperty;var C=(t,s,e)=>s in t?j(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var _=(t,s,e)=>C(t,typeof s!="symbol"?s+"":s,e);import{h as g,aI as J,aJ as L,a5 as B,aK as T}from"./runtime.BCBvpcPx.js";import{c as W,e as R,f as V,d as E,g as M,n as q,j as z}from"./events.CP66OBbH.js";function N(t){var s,e,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(e=N(t[s]))&&(r&&(r+=" "),r+=e)}else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function D(){for(var t,s,e=0,r="",a=arguments.length;e<a;e++)(t=arguments[e])&&(s=N(t))&&(r&&(r+=" "),r+=s);return r}function G(t){return typeof t=="object"?D(t):t??""}function Z(t){if(g){var s=!1,e=()=>{if(!s){if(s=!0,t.hasAttribute("value")){var r=t.value;v(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var a=t.checked;v(t,"checked",null),t.checked=a}}};t.__on_r=e,J(e),W()}}function Y(t,s){s?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function v(t,s,e,r){var a=t.__attributes??(t.__attributes={});g&&(a[s]=t.getAttribute(s),s==="src"||s==="srcset"||s==="href"&&t.nodeName==="LINK")||a[s]!==(a[s]=e)&&(s==="style"&&"__styles"in t&&(t.__styles={}),s==="loading"&&(t[L]=e),e==null?t.removeAttribute(s):typeof e!="string"&&K(t).includes(s)?t[s]=e:t.setAttribute(s,e))}function x(t,s,e,r,a=!1,d=!1,H=!1){var f=s||{},y=t.tagName==="OPTION";for(var k in s)k in e||(e[k]=null);e.class&&(e.class=G(e.class));var I=K(t),P=t.__attributes??(t.__attributes={});for(const i in e){let o=e[i];if(y&&i==="value"&&o==null){t.value=t.__value="",f[i]=o;continue}var p=f[i];if(o!==p){f[i]=o;var b=i[0]+i[1];if(b!=="$$"){if(b==="on"){const l={},n="$$"+i;let u=i.slice(2);var h=z(u);if(R(u)&&(u=u.slice(0,-7),l.capture=!0),!h&&p){if(o!=null)continue;t.removeEventListener(u,f[n],l),f[n]=null}if(o!=null)if(h)t[`__${u}`]=o,E([u]);else{let $=function(O){f[i].call(this,O)};f[n]=V(u,t,$,l)}else h&&(t[`__${u}`]=void 0)}else if(i==="style"&&o!=null)t.style.cssText=o+"";else if(i==="autofocus")M(t,!!o);else if(i==="__value"||i==="value"&&o!=null)t.value=t[i]=t.__value=o;else if(i==="selected"&&y)Y(t,o);else{var c=i;a||(c=q(c));var S=c==="defaultValue"||c==="defaultChecked";if(o==null&&!d&&!S)if(P[i]=null,c==="value"||c==="checked"){let l=t;if(c==="value"){let n=l.defaultValue;l.removeAttribute(c),l.defaultValue=n}else{let n=l.defaultChecked;l.removeAttribute(c),l.defaultChecked=n}}else t.removeAttribute(i);else S||I.includes(c)&&(d||typeof o!="string")?t[c]=o:typeof o!="function"&&(g&&(c==="src"||c==="href"||c==="srcset")||v(t,c,o))}i==="style"&&"__styles"in t&&(t.__styles={})}}}return f}var A=new Map;function K(t){var s=A.get(t.nodeName);if(s)return s;A.set(t.nodeName,s=[]);for(var e,r=t,a=Element.prototype;a!==r;){e=T(r);for(var d in e)e[d].set&&s.push(d);r=B(r)}return s}class w{constructor(s){_(this,"bucket");this.bucket=s}encode(s){return JSON.stringify(s)}dencode(s){return JSON.parse(s)}buildKey(s){return[this.bucket,s].join("$")}isBucketKey(s){return s.startsWith(this.bucket+"$")}set(s,e){const r=this.buildKey(s),a=this.encode(e);localStorage.setItem(r,a)}get(s){const e=this.buildKey(s);return this.getWithKey(e)}getWithKey(s){const e=localStorage.getItem(s);return e===null?null:this.dencode(e)}getAll(){const s=[];for(let e=0;e<localStorage.length;e++){const r=localStorage.key(e);if(r==null)return s;if(!this.isBucketKey(r))continue;const a=this.getWithKey(r);a&&s.push(a)}return s}remove(s){const e=this.buildKey(s);localStorage.removeItem(e)}}class F{constructor(){_(this,"defaultSettings",{nextInvoiceNumber:1e3,scratchPads:{}})}modify(s){const e=this.read();s(e),this.write(e)}read(){const s=localStorage.getItem("settings");return s?JSON.parse(s)||this.defaultSettings:this.defaultSettings}write(s){const e=JSON.stringify(s);console.log(e),localStorage.setItem("settings",e)}getScratchPad(s){const e=this.read();return e.scratchPads||(e.scratchPads={},this.write(e)),e.scratchPads[s]??""}setScratchPad(s,e){this.modify(r=>{r.scratchPads||(r.scratchPads={}),r.scratchPads[s]=e})}}const m=new w("tasks"),tt=new w("invoices"),st=new F;export{v as a,Y as b,x as c,tt as i,Z as r,st as s,m as t};
