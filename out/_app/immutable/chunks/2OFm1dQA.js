var O=Object.defineProperty;var j=(t,s,e)=>s in t?O(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var v=(t,s,e)=>j(t,typeof s!="symbol"?s+"":s,e);import{h as g,aI as C,aa as J,aJ as L,aK as R}from"./DU0Tg2-m.js";import{c as T,e as W,f as V,d as E,g as M,n as q,j as z}from"./B2_Vzv9x.js";function K(t){var s,e,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(s=0;s<o;s++)t[s]&&(e=K(t[s]))&&(r&&(r+=" "),r+=e)}else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function D(){for(var t,s,e=0,r="",o=arguments.length;e<o;e++)(t=arguments[e])&&(s=K(t))&&(r&&(r+=" "),r+=s);return r}function G(t){return typeof t=="object"?D(t):t??""}function Z(t){if(g){var s=!1,e=()=>{if(!s){if(s=!0,t.hasAttribute("value")){var r=t.value;_(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var o=t.checked;_(t,"checked",null),t.checked=o}}};t.__on_r=e,C(e),T()}}function Y(t,s){s?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function _(t,s,e,r){var o=t.__attributes??(t.__attributes={});g&&(o[s]=t.getAttribute(s),s==="src"||s==="srcset"||s==="href"&&t.nodeName==="LINK")||o[s]!==(o[s]=e)&&(s==="style"&&"__styles"in t&&(t.__styles={}),s==="loading"&&(t[L]=e),e==null?t.removeAttribute(s):typeof e!="string"&&N(t).includes(s)?t[s]=e:t.setAttribute(s,e))}function x(t,s,e,r,o=!1,d=!1,H=!1){var n=s||{},k=t.tagName==="OPTION";for(var p in s)p in e||(e[p]=null);e.class&&(e.class=G(e.class));var I=N(t),P=t.__attributes??(t.__attributes={});for(const i in e){let a=e[i];if(k&&i==="value"&&a==null){t.value=t.__value="",n[i]=a;continue}var S=n[i];if(a!==S){n[i]=a;var b=i[0]+i[1];if(b!=="$$"){if(b==="on"){const l={},f="$$"+i;let u=i.slice(2);var h=z(u);if(W(u)&&(u=u.slice(0,-7),l.capture=!0),!h&&S){if(a!=null)continue;t.removeEventListener(u,n[f],l),n[f]=null}if(a!=null)if(h)t[`__${u}`]=a,E([u]);else{let B=function($){n[i].call(this,$)};n[f]=V(u,t,B,l)}else h&&(t[`__${u}`]=void 0)}else if(i==="style"&&a!=null)t.style.cssText=a+"";else if(i==="autofocus")M(t,!!a);else if(i==="__value"||i==="value"&&a!=null)t.value=t[i]=t.__value=a;else if(i==="selected"&&k)Y(t,a);else{var c=i;o||(c=q(c));var A=c==="defaultValue"||c==="defaultChecked";if(a==null&&!d&&!A)if(P[i]=null,c==="value"||c==="checked"){let l=t;if(c==="value"){let f=l.defaultValue;l.removeAttribute(c),l.defaultValue=f}else{let f=l.defaultChecked;l.removeAttribute(c),l.defaultChecked=f}}else t.removeAttribute(i);else A||I.includes(c)&&(d||typeof a!="string")?t[c]=a:typeof a!="function"&&(g&&(c==="src"||c==="href"||c==="srcset")||_(t,c,a))}i==="style"&&"__styles"in t&&(t.__styles={})}}}return n}var w=new Map;function N(t){var s=w.get(t.nodeName);if(s)return s;w.set(t.nodeName,s=[]);for(var e,r=t,o=Element.prototype;o!==r;){e=R(r);for(var d in e)e[d].set&&s.push(d);r=J(r)}return s}class y{constructor(s){v(this,"bucket");this.bucket=s}encode(s){return JSON.stringify(s)}dencode(s){return JSON.parse(s)}buildBucketKey(s){return[this.bucket,s].join("$")}matchesBucketKey(s){return s.startsWith(this.bucket+"$")}set(s,e){const r=this.buildBucketKey(s),o=this.encode(e);localStorage.setItem(r,o)}get(s,e){const r=this.buildBucketKey(s);return this.getWithKey(r)}getWithKey(s){const e=localStorage.getItem(s);return e===null?null:this.dencode(e)}getAll(){const s=[];for(let e=0;e<localStorage.length;e++){const r=localStorage.key(e);if(r==null)return s;if(!this.matchesBucketKey(r))continue;const o=this.getWithKey(r);o&&s.push(o)}return s}remove(s){const e=this.buildBucketKey(s);localStorage.removeItem(e)}removeAll(){const s=[];for(let e=0;e<localStorage.length;e++){const r=localStorage.key(e);if(r==null)break;this.matchesBucketKey(r)&&s.push(r)}for(const e of s)localStorage.removeItem(e)}}class F{constructor(){v(this,"defaultSettings",{nextInvoiceNumber:1e3,scratchPads:{}})}modify(s){const e=this.read();s(e),this.write(e)}read(){const s=localStorage.getItem("settings");return s?JSON.parse(s)||this.defaultSettings:this.defaultSettings}write(s){const e=JSON.stringify(s);console.log(e),localStorage.setItem("settings",e)}getScratchPad(s){const e=this.read();return e.scratchPads||(e.scratchPads={},this.write(e)),e.scratchPads[s]??""}setScratchPad(s,e){this.modify(r=>{r.scratchPads||(r.scratchPads={}),r.scratchPads[s]=e})}}const m=new y("tasks"),tt=new y("invoices"),st=new y("invoice-previews"),et=new F;export{et as a,tt as b,Y as c,x as d,st as i,Z as r,_ as s,m as t};
