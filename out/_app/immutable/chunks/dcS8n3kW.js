var Bt=Object.defineProperty;var Rt=s=>{throw TypeError(s)};var Ft=(s,t,e)=>t in s?Bt(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var I=(s,t,e)=>Ft(s,typeof t!="symbol"?t+"":t,e),Vt=(s,t,e)=>t.has(s)||Rt("Cannot "+e);var n=(s,t,e)=>(Vt(s,t,"read from private field"),e?e.call(s):t.get(s)),a=(s,t,e)=>t.has(s)?Rt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e);import{h as Dt,aN as jt,ac as $t,aO as Jt,aP as qt,j as c,l as u,k as d,y as C}from"./DfIxbQgk.js";import{c as Wt,i as Gt,f as Yt,d as zt,g as Qt,n as Xt,j as Zt}from"./gBOFVro4.js";import{p as o}from"./EhVYkYad.js";function Ot(s){var t,e,i="";if(typeof s=="string"||typeof s=="number")i+=s;else if(typeof s=="object")if(Array.isArray(s)){var r=s.length;for(t=0;t<r;t++)s[t]&&(e=Ot(s[t]))&&(i&&(i+=" "),i+=e)}else for(e in s)s[e]&&(i&&(i+=" "),i+=e);return i}function te(){for(var s,t,e=0,i="",r=arguments.length;e<r;e++)(s=arguments[e])&&(t=Ot(s))&&(i&&(i+=" "),i+=t);return i}function ee(s){return typeof s=="object"?te(s):s??""}function ve(s){if(Dt){var t=!1,e=()=>{if(!t){if(t=!0,s.hasAttribute("value")){var i=s.value;mt(s,"value",null),s.value=i}if(s.hasAttribute("checked")){var r=s.checked;mt(s,"checked",null),s.checked=r}}};s.__on_r=e,jt(e),Wt()}}function se(s,t){t?s.hasAttribute("selected")||s.setAttribute("selected",""):s.removeAttribute("selected")}function mt(s,t,e,i){var r=s.__attributes??(s.__attributes={});Dt&&(r[t]=s.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&s.nodeName==="LINK")||r[t]!==(r[t]=e)&&(t==="style"&&"__styles"in s&&(s.__styles={}),t==="loading"&&(s[Jt]=e),e==null?s.removeAttribute(t):typeof e!="string"&&Mt(s).includes(t)?s[t]=e:s.setAttribute(t,e))}function ye(s,t,e,i,r=!1,l=!1,D=!1){var v=t||{},_=s.tagName==="OPTION";for(var y in t)y in e||(e[y]=null);e.class&&(e.class=ee(e.class));var xt=Mt(s),Kt=s.__attributes??(s.__attributes={});for(const h in e){let g=e[h];if(_&&h==="value"&&g==null){s.value=s.__value="",v[h]=g;continue}var _t=v[h];if(g!==_t){v[h]=g;var Ct=h[0]+h[1];if(Ct!=="$$"){if(Ct==="on"){const m={},b="$$"+h;let S=h.slice(2);var vt=Zt(S);if(Gt(S)&&(S=S.slice(0,-7),m.capture=!0),!vt&&_t){if(g!=null)continue;s.removeEventListener(S,v[b],m),v[b]=null}if(g!=null)if(vt)s[`__${S}`]=g,zt([S]);else{let Pt=function(Ht){v[h].call(this,Ht)};v[b]=Yt(S,s,Pt,m)}else vt&&(s[`__${S}`]=void 0)}else if(h==="style"&&g!=null)s.style.cssText=g+"";else if(h==="autofocus")Qt(s,!!g);else if(h==="__value"||h==="value"&&g!=null)s.value=s[h]=s.__value=g;else if(h==="selected"&&_)se(s,g);else{var p=h;r||(p=Xt(p));var wt=p==="defaultValue"||p==="defaultChecked";if(g==null&&!l&&!wt)if(Kt[h]=null,p==="value"||p==="checked"){let m=s;if(p==="value"){let b=m.defaultValue;m.removeAttribute(p),m.defaultValue=b}else{let b=m.defaultChecked;m.removeAttribute(p),m.defaultChecked=b}}else s.removeAttribute(h);else wt||xt.includes(p)&&(l||typeof g!="string")?s[p]=g:typeof g!="function"&&(Dt&&(p==="src"||p==="href"||p==="srcset")||mt(s,p,g))}h==="style"&&"__styles"in s&&(s.__styles={})}}}return v}var Lt=new Map;function Mt(s){var t=Lt.get(s.nodeName);if(t)return t;Lt.set(s.nodeName,t=[]);for(var e,i=s,r=Element.prototype;r!==i;){e=qt(i);for(var l in e)e[l].set&&t.push(l);i=$t(i)}return t}const ie="tasks",ne="invoices",re="settings",oe="fdfa7987-22fb-4458-896b-d04b30f9ba38";var w,R,L,A,k,U,N,E,O,M;class St{constructor(t){a(this,w,c(o(navigator.language)));a(this,R,c());a(this,L,c());a(this,A,c(1e3));a(this,k,c(o({})));a(this,U,c());a(this,N,c("USD"));a(this,E,c());a(this,O,c());a(this,M,c());t&&this.applyModel(t)}get localeCode(){return u(n(this,w))}set localeCode(t){d(n(this,w),o(t))}get address(){return u(n(this,R))}set address(t){d(n(this,R),o(t))}get logoData(){return u(n(this,L))}set logoData(t){d(n(this,L),o(t))}get nextInvoiceNumber(){return u(n(this,A))}set nextInvoiceNumber(t){d(n(this,A),o(t))}get scratchPads(){return u(n(this,k))}set scratchPads(t){d(n(this,k),o(t))}get defaultInvoiceHeader(){return u(n(this,U))}set defaultInvoiceHeader(t){d(n(this,U),o(t))}get defaultInvoiceCurrencyCode(){return u(n(this,N))}set defaultInvoiceCurrencyCode(t){d(n(this,N),o(t))}get defaultInvoiceFooter(){return u(n(this,E))}set defaultInvoiceFooter(t){d(n(this,E),o(t))}get cloudSyncHost(){return u(n(this,O))}set cloudSyncHost(t){d(n(this,O),o(t))}get cloudSyncUserId(){return u(n(this,M))}set cloudSyncUserId(t){d(n(this,M),o(t))}applyModel(t){this.localeCode=t.localeCode??navigator.language,this.address=t.address??"",this.logoData=t.logoData,this.nextInvoiceNumber=t.nextInvoiceNumber??1e3,this.defaultInvoiceHeader=t.defaultInvoiceHeader,this.defaultInvoiceCurrencyCode=t.defaultInvoiceCurrencyCode??"USD",this.defaultInvoiceFooter=t.defaultInvoiceFooter,this.scratchPads=t.scratchPads??{},this.cloudSyncHost=t.cloudSyncHost,this.cloudSyncUserId=t.cloudSyncUserId}getModel(){return{localeCode:this.localeCode,address:this.address,logoData:this.logoData,nextInvoiceNumber:this.nextInvoiceNumber,defaultInvoiceHeader:this.defaultInvoiceHeader,defaultInvoiceCurrencyCode:this.defaultInvoiceCurrencyCode,defaultInvoiceFooter:this.defaultInvoiceFooter,scratchPads:this.scratchPads,cloudSyncHost:this.cloudSyncHost,cloudSyncUserId:this.cloudSyncUserId}}}w=new WeakMap,R=new WeakMap,L=new WeakMap,A=new WeakMap,k=new WeakMap,U=new WeakMap,N=new WeakMap,E=new WeakMap,O=new WeakMap,M=new WeakMap;class At{static padLeft(t,e,i){const r=i-t.length;for(let l=0;l<r;l++)t=e[0]+t;return t}}class It{static toInputDateValue(t){var e=t.getDate(),i=t.getMonth()+1,r=t.getFullYear();return`${r}-${At.padLeft(i.toString(),"0",2)}-${At.padLeft(e.toString(),"0",2)}`}static toLocalDatefromString(t,e){const i=new Date(t);return It.toLocalDate(i,e)}static toLocalDate(t,e){return new Intl.DateTimeFormat(e,{}).format(t)}}var x,K,P,H,B,F,V,dt,lt;class kt{constructor(t){a(this,x,c(o(crypto.randomUUID().toString())));a(this,K,c());a(this,P,c(0));a(this,H,c(""));a(this,B,c(""));a(this,F,c(0));a(this,V,c(0));a(this,dt,C(()=>0));a(this,lt,C(()=>this.quantity*this.unitCost));t&&this.applyModel(t)}get id(){return u(n(this,x))}set id(t){d(n(this,x),o(t))}get extRefId(){return u(n(this,K))}set extRefId(t){d(n(this,K),o(t))}get number(){return u(n(this,P))}set number(t){d(n(this,P),o(t))}get description(){return u(n(this,H))}set description(t){d(n(this,H),o(t))}get units(){return u(n(this,B))}set units(t){d(n(this,B),o(t))}get quantity(){return u(n(this,F))}set quantity(t){d(n(this,F),o(t))}get unitCost(){return u(n(this,V))}set unitCost(t){d(n(this,V),o(t))}get tax(){return u(n(this,dt))}get total(){return u(n(this,lt))}get isDescriptionOnlyLine(){return this.quantity==0}getModel(){return{id:this.id,extRefId:this.extRefId,number:this.number,description:this.description,units:this.units,quantity:this.quantity,unitCost:this.unitCost}}applyModel(t){this.id=t.id,this.extRefId=t.extRefId,this.number=t.number,this.description=t.description,this.units=t.units,this.quantity=t.quantity,this.unitCost=t.unitCost}}x=new WeakMap,K=new WeakMap,P=new WeakMap,H=new WeakMap,B=new WeakMap,F=new WeakMap,V=new WeakMap,dt=new WeakMap,lt=new WeakMap;var j,$,J,q,W,G,Y,z,Q,X,ht,ft,gt;class ae{constructor(t){a(this,j,c(o(crypto.randomUUID().toString())));a(this,$,c("USD"));a(this,J,c(""));a(this,q,c(o(It.toInputDateValue(new Date))));a(this,W,c(""));a(this,G,c(o([])));a(this,Y,c(o([])));a(this,z,c(o([])));a(this,Q,c(10));a(this,X,c(o([])));a(this,ht,C(()=>this.lines.reduce((t,e)=>t+e.total,0)));a(this,ft,C(()=>this.lines.reduce((t,e)=>t+e.tax,0)));a(this,gt,C(()=>this.subtotal+this.taxTotal));t&&this.applyModel(t)}get id(){return u(n(this,j))}set id(t){d(n(this,j),o(t))}get currencyCode(){return u(n(this,$))}set currencyCode(t){d(n(this,$),o(t))}get number(){return u(n(this,J))}set number(t){d(n(this,J),o(t))}get date(){return u(n(this,q))}set date(t){d(n(this,q),o(t))}get orderRef(){return u(n(this,W))}set orderRef(t){d(n(this,W),o(t))}get headerLines(){return u(n(this,G))}set headerLines(t){d(n(this,G),o(t))}get issueToLines(){return u(n(this,Y))}set issueToLines(t){d(n(this,Y),o(t))}get footerLines(){return u(n(this,z))}set footerLines(t){d(n(this,z),o(t))}get nextLineNumber(){return u(n(this,Q))}set nextLineNumber(t){d(n(this,Q),o(t))}get lines(){return u(n(this,X))}set lines(t){d(n(this,X),o(t))}get subtotal(){return u(n(this,ht))}get taxTotal(){return u(n(this,ft))}get grandTotal(){return u(n(this,gt))}getModel(){return{id:this.id,currencyCode:this.currencyCode,number:this.number,date:this.date,orderRef:this.orderRef,headerLines:this.headerLines,issueToLines:this.issueToLines,lines:this.lines.map(t=>t.getModel()),footerLines:this.footerLines}}applyModel(t){this.id=t.id,this.currencyCode=t.currencyCode,this.number=t.number,this.date=t.date,this.orderRef=t.orderRef,this.headerLines=t.headerLines??[],this.issueToLines=t.issueToLines,this.lines=t.lines.map(e=>new kt(e)),this.footerLines=t.footerLines??[]}get headerLinesAsText(){return this.headerLines.join(`
`)}set headerLinesAsText(t){this.headerLines=t.split(`
`)}get issueToAsText(){return this.issueToLines.join(`
`)}set issueToAsText(t){this.issueToLines=t.split(`
`)}get footnoteAsText(){return this.footerLines.join(`
`)}set footnoteAsText(t){this.footerLines=t.split(`
`)}containsExtRefId(t){return this.lines.some(i=>i.extRefId===t)}removeLineWithId(t){this.lines=this.lines.filter(e=>e.id!=t)}removeLineWithExtRefId(t){this.lines=this.lines.filter(e=>e.extRefId!=t)}addLine(t){const e=t??new kt;return e.number=this.nextLineNumber,this.nextLineNumber+=10,this.lines.push(e),e.id}sortAndRenumberLines(){this.lines.sort((t,e)=>t.number-e.number),this.renumberLines()}renumberLines(){let t=10;for(let e=0;e<this.lines.length;e++){const i=this.lines[e];i.number=t,t+=10}this.nextLineNumber=t}}j=new WeakMap,$=new WeakMap,J=new WeakMap,q=new WeakMap,W=new WeakMap,G=new WeakMap,Y=new WeakMap,z=new WeakMap,Q=new WeakMap,X=new WeakMap,ht=new WeakMap,ft=new WeakMap,gt=new WeakMap;var T=(s=>(s.Running="Running",s.Paused="Paused",s.Stopped="Stopped",s.Archived="Archived",s))(T||{}),Z,tt,et,st,it,nt,rt,ot,at;class ue{constructor(t){a(this,Z,c(o(crypto.randomUUID())));a(this,tt,c(o(T.Stopped)));a(this,et,c(o(It.toInputDateValue(new Date))));a(this,st,c(""));a(this,it,c(0));a(this,nt,c(0));a(this,rt,c());a(this,ot,c(""));a(this,at,c(o([])));t&&this.applyModel(t)}get id(){return u(n(this,Z))}set id(t){d(n(this,Z),o(t))}get state(){return u(n(this,tt))}set state(t){d(n(this,tt),o(t))}get date(){return u(n(this,et))}set date(t){d(n(this,et),o(t))}get name(){return u(n(this,st))}set name(t){d(n(this,st),o(t))}get duration(){return u(n(this,it))}set duration(t){d(n(this,it),o(t))}get affectiveDurationHours(){return u(n(this,nt))}set affectiveDurationHours(t){d(n(this,nt),o(t))}get timeRunStarted(){return u(n(this,rt))}set timeRunStarted(t){d(n(this,rt),o(t))}get invoiceRefId(){return u(n(this,ot))}set invoiceRefId(t){d(n(this,ot),o(t))}get tags(){return u(n(this,at))}set tags(t){d(n(this,at),o(t))}get tagsAsText(){return this.tags.join(" ")}set tagsAsText(t){this.tags=t.trim().split(" ")}getModel(t){return{id:t??this.id,state:this.state,date:this.date,name:this.name,duration:this.duration,affectiveDurationHours:this.affectiveDurationHours,timeRunStarted:this.timeRunStarted,invoiceRefId:this.invoiceRefId,tags:this.tags}}applyModel(t){this.id=t.id,this.state=t.state,this.date=t.date,this.name=t.name,this.duration=t.duration,this.affectiveDurationHours=t.affectiveDurationHours,this.timeRunStarted=t.timeRunStarted,this.invoiceRefId=t.invoiceRefId,this.tags=t.tags}save(){he.taskRepo.set(this.id,this.getModel())}pause(){this.state==T.Running&&(this.state=T.Paused,this.timeRunStarted=void 0)}start(){this.state=T.Running,this.timeRunStarted=Date.now()}stop(){this.state=T.Stopped,this.timeRunStarted=void 0}incrementDuration(t){if(this.state==T.Running){const e=this.timeRunStarted??Date.now(),i=t*60*1e3,r=e-i;this.timeRunStarted=r,this.recalculateDurationFromRunningSession()}else this.setDuration(this.duration+t*60)}recalculateDurationFromRunningSession(){if(this.state!=T.Running)return;const t=this.timeRunStarted??Date.now(),e=(Date.now()-t)/1e3;this.setDuration(e)}setDuration(t){this.duration=Math.ceil(t),this.affectiveDurationHours=this.calculateAffectiveHours(this.duration,15)}calculateAffectiveHours(t,e){let i=t/60;return Math.ceil(i/e)*e/60}}Z=new WeakMap,tt=new WeakMap,et=new WeakMap,st=new WeakMap,it=new WeakMap,nt=new WeakMap,rt=new WeakMap,ot=new WeakMap,at=new WeakMap;class yt{constructor(t,e){this.bucket=t,this.options=e,this.bucket=t}encode(t){return JSON.stringify(t)}dencode(t){return JSON.parse(t)}buildBucketKey(t){return[this.bucket,t].join("$")}matchesBucketItemKey(t){return t.startsWith(this.bucket+"$")}setChangedTimestamp(){var t;((t=this.options)==null?void 0:t.onModifiedCallback)!=null&&this.options.onModifiedCallback()}set(t,e){const i=this.buildBucketKey(t),r=this.encode(e);localStorage.setItem(i,r),this.setChangedTimestamp()}get(t){const e=this.buildBucketKey(t);return this.getWithKey(e)}getWithKey(t){const e=localStorage.getItem(t);return e===null?null:this.dencode(e)}getAll(){const t=[];for(let e=0;e<localStorage.length;e++){const i=localStorage.key(e);if(i==null)return t;if(!this.matchesBucketItemKey(i))continue;const r=this.getWithKey(i);r&&t.push(r)}return t}remove(t){const e=this.buildBucketKey(t);localStorage.removeItem(e),this.setChangedTimestamp()}removeAll(){const t=[];for(let e=0;e<localStorage.length;e++){const i=localStorage.key(e);if(i==null)break;this.matchesBucketItemKey(i)&&t.push(i)}if(t.length!=0){for(const e of t)localStorage.removeItem(e);this.setChangedTimestamp()}}}const pt=class pt{constructor(t){this.repo=t}modify(t){const e=this.read();t(e),this.write(e)}read(){const t=this.repo.get("");return t?new St(t):new St(pt.defaultSettings)}write(t){this.repo.set("",t.getModel())}incrementNextInvoiceNumber(){this.modify(t=>{t.nextInvoiceNumber++})}getScratchPad(t){return this.read().scratchPads[t]??""}setScratchPad(t,e){this.modify(i=>{i.scratchPads[t]=e})}};I(pt,"defaultSettings",{localeCode:"en-US",nextInvoiceNumber:1e3,defaultInvoiceCurrencyCode:"USD",scratchPads:{}});let Tt=pt;class Ut{constructor(t,e,i){I(this,"remoteUrl");I(this,"userAndAppPathSegments");const r=URL.parse(t);if(!r)throw new Error(`Invalid remote URL: ${t}`);this.userAndAppPathSegments=[e,i],this.remoteUrl=r}buildFullRemoteUrl(t){const e=new URL(this.remoteUrl);return e.pathname=t.join("/"),e}buildListUrl(t){return this.buildFullRemoteUrl([...this.userAndAppPathSegments,t])}buildItemUrl(t,e){return this.buildFullRemoteUrl([...this.userAndAppPathSegments,t,e])}async getItemList(t){const e=this.buildListUrl(t);return await(await fetch(e)).json()}async getItem(t,e){const i=this.buildItemUrl(t,e);return await(await fetch(i)).text()}async setItem(t,e,i){const r=this.buildItemUrl(t,e);await fetch(r,{method:"POST",body:i})}async delItem(t,e){const i=this.buildItemUrl(t,e);await fetch(i,{method:"DELETE"})}}const Nt="default",Et="dataTimestamp",ct="ids",f=class f{constructor(t,e,i){this.host=t,this.userId=e,this.appId=i}static build(t,e,i){return t!=null&&(t.startsWith("https://")||t.startsWith("http://"))&&e!=null&&e.length>0&&i!=null&&i.length>0?new f(t,e,i):null}async backup(t){const e=new Ut(this.host,this.userId,this.appId);await e.setItem(f.BUCKET_ID_META,Et,JSON.stringify(t.modified)),await e.setItem(f.BUCKET_ID_SETTINGS,Nt,JSON.stringify(t.settings));const i=t.tasks.map(l=>l.id);await e.setItem(f.BUCKET_ID_TASKS,ct,JSON.stringify(i));for(const l of t.tasks)await e.setItem(f.BUCKET_ID_TASKS,l.id,JSON.stringify(l));const r=t.invoices.map(l=>l.id);await e.setItem(f.BUCKET_ID_INVOICES,ct,JSON.stringify(r));for(const l of t.invoices)await e.setItem(f.BUCKET_ID_INVOICES,l.id,JSON.stringify(l))}async getStoredValueOrDefault(t,e,i,r){try{const l=await t.getItem(e,i);if(l==null)return r;const D=JSON.parse(l);return D??r}catch{return r}}async getStoredValueOrThrow(t,e,i){try{const r=await t.getItem(e,i),l=JSON.parse(r);if(l==null)throw new Error(`Object is undefined after parsing and casting. JSON: ${r}`);return l}catch(r){throw new Error(`Unable to get stored value for key ${i} in bucket ${e}. ${r}`)}}async getData(){const t=new Ut(this.host,this.userId,this.appId),e=await this.getStoredValueOrDefault(t,f.BUCKET_ID_META,Et,0);let i=await this.getStoredValueOrThrow(t,f.BUCKET_ID_SETTINGS,Nt);const r=await this.getStoredValueOrDefault(t,f.BUCKET_ID_TASKS,ct,[]),l=[];for await(const _ of r)try{const y=await this.getStoredValueOrThrow(t,f.BUCKET_ID_TASKS,_);l.push(y)}catch(y){console.error(y)}const D=await this.getStoredValueOrDefault(t,f.BUCKET_ID_INVOICES,ct,[]),v=[];for await(const _ of D)try{const y=await this.getStoredValueOrThrow(t,f.BUCKET_ID_INVOICES,_);v.push(y)}catch(y){console.error(y)}return{modified:e,settings:i,tasks:l,invoices:v}}};I(f,"BUCKET_ID_META","meta"),I(f,"BUCKET_ID_SETTINGS","settings"),I(f,"BUCKET_ID_TASKS","tasks"),I(f,"BUCKET_ID_INVOICES","invoices");let bt=f;class ce{static async convertFileToDataURL(t){return new Promise((e,i)=>{const r=new FileReader;r.onloadend=()=>{const l=r.result;return e(l)},r.onerror=i,r.readAsDataURL(t)})}static downloadAsFile(t,e){const i=new Blob([t],{type:"text/plain"}),r=document.createElement("a");r.href=URL.createObjectURL(i),r.download=e,r.click(),URL.revokeObjectURL(r.href)}}class de{async backup(t){const e=this.encode(t);this.downloadAsFile(e)}downloadAsFile(t){const e=`${new Date().valueOf()}.timely-backup`;ce.downloadAsFile(t,e)}encode(t){return JSON.stringify(t,null,2)}decodeFromJson(t){return JSON.parse(t)}}var ut;class le{constructor(){I(this,"settingsRepo");I(this,"taskRepo");I(this,"invRepo");I(this,"settingsController");a(this,ut,c(0));const t={onModifiedCallback:()=>this.setChangedTimestamp()};this.settingsRepo=new yt(re,t),this.taskRepo=new yt(ie,t),this.invRepo=new yt(ne,t),this.settingsController=new Tt(this.settingsRepo),this.dataModifiedTimestamp=this.readDataModifiedTimestamp()??0}get dataModifiedTimestamp(){return u(n(this,ut))}set dataModifiedTimestamp(t){d(n(this,ut),o(t))}async getTasks(){return this.taskRepo.getAll().map(t=>new ue(t))}async getInvoices(){return this.invRepo.getAll().map(t=>new ae(t))}getAppData(){return{modified:this.readDataModifiedTimestamp()??0,settings:this.settingsController.read().getModel(),tasks:this.taskRepo.getAll(),invoices:this.invRepo.getAll()}}setChangedTimestamp(t){this.dataModifiedTimestamp=t??new Date().valueOf(),localStorage.setItem("_modified",this.dataModifiedTimestamp.toString())}readDataModifiedTimestamp(){const t=localStorage.getItem("_modified");if(t===null)return null;const e=parseInt(t);return isNaN(e)?null:(this.dataModifiedTimestamp=e,e)}async backupData(t){const e=this.getAppData(),i=this.settingsController.read(),r=bt.build(i.cloudSyncHost,i.cloudSyncUserId,oe);if((t==="auto"||t==="cloud")&&r!=null){const l=await r.getData();if(l&&l.modified>=e.modified){await this.backupData("local");return}await r.backup(e),alert("Backup to cloud successful")}else t==="local"&&await new de().backup(e)}async restoreAppData(t){localStorage.clear(),this.setChangedTimestamp(t.modified),this.settingsController.write(new St(t.settings));for(const e of t.tasks)this.taskRepo.set(e.id,e);for(const e of t.invoices)this.invRepo.set(e.id,e)}}ut=new WeakMap;const he=new le;export{It as F,ae as I,Ut as K,de as L,T,ce as U,he as a,oe as b,bt as c,se as d,ue as e,kt as f,ye as g,ve as r,mt as s};
