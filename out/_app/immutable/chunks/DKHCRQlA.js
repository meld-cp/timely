class n{constructor(t,e,s,a){this.remote=t,this.userId=e,this.appId=s,this.bucketId=a}buildUrl(t){return new URL(`${this.remote}/${this.userId}/${this.appId}/${this.bucketId}/${t}`)}async getItem(t){const e=this.buildUrl(t);return await(await fetch(e)).text()}async setItem(t,e){const s=this.buildUrl(t);await fetch(s,{method:"POST",body:e})}}class o{encodeDataToBackup(){return btoa(JSON.stringify(localStorage))}downloadBackupFile(){const t=this.encodeDataToBackup(),e=new Blob([t],{type:"text/plain"}),s=document.createElement("a");s.href=URL.createObjectURL(e),s.download=`${new Date().valueOf()}.timely-backup`,s.click(),URL.revokeObjectURL(s.href)}}class c{restoreFromBase64(t){const e=atob(t),s=JSON.parse(e);localStorage.clear();for(const a in s)s.hasOwnProperty(a)&&localStorage.setItem(a,s[a])}async restoreFromFile(t){const e=await t.text();this.restoreFromBase64(e)}}class i{constructor(t,e,s,a){this.host=t,this.userId=e,this.appId=s,this.bucketId=a}static build(t,e,s,a){return t!=null&&(t.startsWith("https://")||t.startsWith("http://"))&&e!=null&&e.length>0&&s!=null&&s.length>0&&a!=null&&a.length>0?new i(t,e,s,a):null}async put(t,e){await new n(this.host,this.userId,this.appId,this.bucketId).setItem(t,e)}async get(t){return await new n(this.host,this.userId,this.appId,this.bucketId).getItem(t)}}export{o as B,i as C,c as R};
