import{a as P,t as U}from"../chunks/dYIOUtEc.js";import{p as V,W as y,s,f as j,a as A,q as i,O as n,c as d,r as p}from"../chunks/5rrx3yqk.js";import{d as L,r as T}from"../chunks/DJXYkiHh.js";import{s as F}from"../chunks/PwPRnE0L.js";import{b as E,a as q}from"../chunks/CBFY0WoV.js";import{p as m}from"../chunks/BkxFj3vo.js";import{b as H}from"../chunks/BPBTmVtq.js";import{C as N,B as W,R as Y}from"../chunks/DKHCRQlA.js";import{s as z}from"../chunks/syNsETmN.js";const G="fdfa7987-22fb-4458-896b-d04b30f9ba38",J="619a2d5c-4eb4-4c10-b722-337768e25a5a",K="backup";function M(l,t){t.downloadBackupFile()}async function Q(l,t,a){t&&await t.put(K,i(a))}async function X(l,t,a){t&&n(a,m(await t.get(K)))}async function Z(l,t,a){var c;const r=(c=i(t))==null?void 0:c.item(0);r&&n(a,m(await r.text()))}var $=U('<h2>Backup & Restore</h2> <section><article><textarea name="backup-text" class="svelte-1iwmjr1"></textarea> <button>Local Backup</button> <button>Cloud Backup</button></article></section> <section><article><div style="display: flex; gap: 1rem; align-items: center; margin-bottom: 1rem;"><button style="flex-shrink: 1;">Read From Cloud</button> or <input name="restore-file" type="file" accept=".timely-backup"></div> <textarea name="restore-text" class="svelte-1iwmjr1"></textarea> <button>Restore</button></article></section>',1);function lt(l,t){V(t,!0);const a=z.read();let r=N.build(a.cloudSyncHost,a.cloudSyncUserId,G,J);const c=new W;let f=y(m(c.encodeDataToBackup())),b=y(void 0),o=y(void 0),_;function I(){try{if(!i(o))throw Error("No data to restore, select a file first");new Y().restoreFromBase64(i(o)),n(o,void 0),_&&(_.value=""),n(f,m(c.encodeDataToBackup())),alert("Restored successfully!")}catch(e){alert(e)}}var R=$(),v=s(j(R),2),h=d(v),k=d(h);T(k);var S=s(k,2);S.__click=[M,c];var w=s(S,2);w.__click=[Q,r,f],w.disabled=!r,p(h),p(v);var C=s(v,2),D=d(C),x=d(D),B=d(x);B.__click=[X,r,o],B.disabled=!r;var u=s(B,2);u.__change=[Z,b,o],F(u,"flex","1"),F(u,"margin-bottom","0"),H(u,e=>_=e,()=>_),p(x);var g=s(x,2);T(g);var O=s(g,2);O.__click=I,p(D),p(C),E(k,()=>i(f),e=>n(f,e)),q(u,()=>i(b),e=>n(b,e)),E(g,()=>i(o),e=>n(o,e)),P(l,R),A()}L(["click","change"]);export{lt as component};
