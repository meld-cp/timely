import{a as S,t as U}from"../chunks/dYIOUtEc.js";import{A as me,p as he,s as t,f as Ce,t as D,a as Ie,c as r,r as o,q as d,w as ce}from"../chunks/5rrx3yqk.js";import{s as F}from"../chunks/BLSxdP-L.js";import{e as M,i as z,r as J,a as L,s as Se}from"../chunks/B3BOKYqz.js";import{l as De,d as Fe,r as K}from"../chunks/DJXYkiHh.js";import{s as Q}from"../chunks/PwPRnE0L.js";import{b as f}from"../chunks/CBFY0WoV.js";import{i as Le,p as Ue}from"../chunks/BkxFj3vo.js";import{b as Ne}from"../chunks/BPBTmVtq.js";import{F as we}from"../chunks/DvTEyFA3.js";import{F as de}from"../chunks/C1UJn8Ae.js";import{s as ve}from"../chunks/syNsETmN.js";function pe(a,i,s){if(a.multiple)return qe(a,i);for(var v of a.options){var e=y(v);if(Le(e,i)){v.selected=!0;return}}(!s||i!==void 0)&&(a.selectedIndex=-1)}function Ee(a,i){me(()=>{var s=new MutationObserver(()=>{var v=a.__value;pe(a,v)});return s.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{s.disconnect()}})}function _e(a,i,s=i){var v=!0;De(a,"change",e=>{var u=e?"[selected]":":checked",b;if(a.multiple)b=[].map.call(a.querySelectorAll(u),y);else{var h=a.querySelector(u)??a.querySelector("option:not([disabled])");b=h&&y(h)}s(b)}),me(()=>{var e=i();if(pe(a,e,v),v&&e===void 0){var u=a.querySelector(":checked");u!==null&&(e=y(u),s(e))}a.__value=e,v=!1}),Ee(a)}function qe(a,i){for(var s of a.options)s.selected=~i.indexOf(y(s))}function y(a){return"__value"in a?a.__value:a.value}class He{static async convertFileToDataURL(i){return new Promise((s,v)=>{const e=new FileReader;e.onloadend=()=>{const u=e.result;return s(u)},e.onerror=v,e.readAsDataURL(i)})}}function m(a,i){i()}var Re=U("<option> </option>"),ke=U("<span> </span>"),Ae=U("<option> </option>"),Ze=U('<h2>Settings</h2> <section><article><details open><summary>General Settings</summary> <label>Locale <select name="locale"><option></option><!></select> <small>Examples: <!></small></label></details></article> <article><details open><summary>Cloud Backup Settings</summary> <label>Host <input name="cloud-host" type="text"></label> <label>User Token <input name="cloud-user" type="text"></label></details></article> <article><details open><summary>Invoice Settings</summary> <label>Default Currency <select name="currency"><option></option><!></select> <small>Example: <span> </span></small></label> <label>Your Address <textarea name="address" autocomplete="address-line1" class="svelte-fggbt6"></textarea></label> <label>Default Invoice Header Lines <textarea name="inv-header" class="svelte-fggbt6"></textarea></label> <label>Your Logo <div style="display: flex; align-items: center; gap: 1rem;"><img alt=""> <input name="inv-logo-file" type="file" accept=".png, .jpg, .jpeg, .svg"></div></label> <label>Next Invoice Number <input name="next-inv-num" type="number" min="1"></label> <label>Default Invoice Footer Lines <textarea name="default-inv-footnote" class="svelte-fggbt6"></textarea></label></details></article></section>',1);function Qe(a,i){he(i,!0);const s=[{code:"en-NZ",name:"English (New Zealand)"},{code:"en-US",name:"English (United States)"},{code:"de-DE",name:"Deutsch"}],v=[{code:"NZD",name:"New Zealand Dollar"},{code:"USD",name:"United States Dollar"},{code:"EUR",name:"Euro"}];let e=Ue(ve.read()),u,b=ce(()=>[`Date: ${we.toLocalDate(new Date,e.localeCode)}`,`Numbers: ${de.decimalPlaces(123456.789,2,e.localeCode)}`]),h=ce(()=>de.currency(123456.789,e.defaultInvoiceCurrencyCode,e.localeCode));function _(){ve.write(e)}async function fe(){if(u&&u.files&&u.files.length>0){const l=await He.convertFileToDataURL(u.files[0]);e.logoData=l,_()}}var V=Ze(),W=t(Ce(V),2),N=r(W),X=r(N),ee=t(r(X),2),g=t(r(ee));g.__change=[m,_];var C=r(g);C.value=((C.__value="")==null,"");var be=t(C);M(be,17,()=>s,z,(l,c)=>{var n=Re(),p={},G=r(n,!0);o(n),D(()=>{p!==(p=d(c).code)&&(n.value=(n.__value=d(c).code)==null?"":d(c).code),L(n,d(c).code==e.localeCode),F(G,d(c).name)}),S(l,n)}),o(g);var ae=t(g,2),ge=t(r(ae));M(ge,17,()=>d(b),z,(l,c)=>{var n=ke();Q(n,"padding","0 0.5rem");var p=r(n,!0);o(n),D(()=>F(p,d(c))),S(l,n)}),o(ae),o(ee),o(X),o(N);var w=t(N,2),te=r(w),E=t(r(te),2),q=t(r(E));J(q),q.__input=[m,_],o(E);var le=t(E,2),H=t(r(le));J(H),H.__input=[m,_],o(le),o(te),o(w);var re=t(w,2),oe=r(re),R=t(r(oe),2),x=t(r(R));x.__change=[m,_];var I=r(x);I.value=((I.__value="")==null,"");var xe=t(I);M(xe,17,()=>v,z,(l,c)=>{var n=Ae(),p={},G=r(n,!0);o(n),D(()=>{p!==(p=d(c).code)&&(n.value=(n.__value=d(c).code)==null?"":d(c).code),L(n,d(c).code==e.defaultInvoiceCurrencyCode),F(G,d(c).name)}),S(l,n)}),o(x);var ne=t(x,2),k=t(r(ne));Q(k,"padding","0 0.5rem");var ye=r(k,!0);o(k),o(ne),o(R);var A=t(R,2),Z=t(r(A));K(Z),Z.__input=[m,_],o(A);var T=t(A,2),j=t(r(T));K(j),j.__input=[m,_],o(T);var O=t(T,2),ie=t(r(O)),P=r(ie),se=t(P,2);se.__change=fe,Ne(se,l=>u=l,()=>u),o(ie),o(O);var Y=t(O,2),$=t(r(Y));J($),$.__input=[m,_],o(Y);var ue=t(Y,2),B=t(r(ue));K(B),B.__input=[m,_],o(ue),o(oe),o(re),o(W),D(()=>{L(C,e.localeCode==""),L(I,e.defaultInvoiceCurrencyCode==""),F(ye,d(h)),Se(P,"src",e.logoData),Q(P,"height","6rem")}),_e(g,()=>e.localeCode,l=>e.localeCode=l),f(q,()=>e.cloudSyncHost,l=>e.cloudSyncHost=l),f(H,()=>e.cloudSyncUserId,l=>e.cloudSyncUserId=l),_e(x,()=>e.defaultInvoiceCurrencyCode,l=>e.defaultInvoiceCurrencyCode=l),f(Z,()=>e.address,l=>e.address=l),f(j,()=>e.defaultInvoiceHeader,l=>e.defaultInvoiceHeader=l),f($,()=>e.nextInvoiceNumber,l=>e.nextInvoiceNumber=l),f(B,()=>e.defaultInvoiceFooter,l=>e.defaultInvoiceFooter=l),S(a,V),Ie()}Fe(["change","input"]);export{Qe as component};
