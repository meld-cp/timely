import{a as S,t as L}from"../chunks/JxQl07LI.js";import{C as me,p as he,s as a,f as Ce,t as D,a as Ie,c as r,r as o,l as c,y as ce}from"../chunks/DfIxbQgk.js";import{l as Se,d as De,r as P,s as F}from"../chunks/gBOFVro4.js";import{e as z,i as J}from"../chunks/DeDL2Fnw.js";import{a as de,r as K,F as Fe,U as Ue,d as U,s as Le}from"../chunks/pG2aVCQS.js";import{s as Q}from"../chunks/PwPRnE0L.js";import{b as f}from"../chunks/CRbFqH2L.js";import{i as Ne,p as Ee}from"../chunks/EhVYkYad.js";import{b as we}from"../chunks/fg7KLnab.js";import{F as ve}from"../chunks/C1UJn8Ae.js";function pe(t,s,d){if(t.multiple)return qe(t,s);for(var v of t.options){var i=y(v);if(Ne(i,s)){v.selected=!0;return}}(!d||s!==void 0)&&(t.selectedIndex=-1)}function He(t,s){me(()=>{var d=new MutationObserver(()=>{var v=t.__value;pe(t,v)});return d.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{d.disconnect()}})}function _e(t,s,d=s){var v=!0;Se(t,"change",i=>{var e=i?"[selected]":":checked",b;if(t.multiple)b=[].map.call(t.querySelectorAll(e),y);else{var h=t.querySelector(e)??t.querySelector("option:not([disabled])");b=h&&y(h)}d(b)}),me(()=>{var i=s();if(pe(t,i,v),v&&i===void 0){var e=t.querySelector(":checked");e!==null&&(i=y(e),d(i))}t.__value=i,v=!1}),He(t)}function qe(t,s){for(var d of t.options)d.selected=~s.indexOf(y(d))}function y(t){return"__value"in t?t.__value:t.value}function m(t,s){s()}var ke=L("<option> </option>"),Ze=L("<span> </span>"),je=L("<option> </option>"),Ae=L('<h2>Settings</h2> <section><article><details open><summary>General Settings</summary> <label>Locale <select name="locale"><option></option><!></select> <small>Examples: <!></small></label></details></article> <article><details open><summary>Cloud Backup Settings</summary> <label>Host <input name="cloud-host" type="text"></label> <label>User Token <input name="cloud-user" type="text"></label></details></article> <article><details open><summary>Invoice Settings</summary> <label>Default Currency <select name="currency"><option></option><!></select> <small>Example: <span> </span></small></label> <label>Your Address <textarea name="address" autocomplete="address-line1" class="svelte-fggbt6"></textarea></label> <label>Default Invoice Header Lines <textarea name="inv-header" class="svelte-fggbt6"></textarea></label> <label>Your Logo <div style="display: flex; align-items: center; gap: 1rem;"><img alt=""> <input name="inv-logo-file" type="file" accept=".png, .jpg, .jpeg, .svg"></div></label> <label>Next Invoice Number <input name="next-inv-num" type="number" min="1"></label> <label>Default Invoice Footer Lines <textarea name="default-inv-footnote" class="svelte-fggbt6"></textarea></label></details></article></section>',1);function Je(t,s){he(s,!0);const d=[{code:"en-NZ",name:"English (New Zealand)"},{code:"en-US",name:"English (United States)"},{code:"de-DE",name:"Deutsch"}],v=[{code:"NZD",name:"New Zealand Dollar"},{code:"USD",name:"United States Dollar"},{code:"EUR",name:"Euro"}];let i,e=Ee(de.settingsController.read()),b=ce(()=>[`Date: ${Fe.toLocalDate(new Date,e.localeCode)}`,`Numbers: ${ve.decimalPlaces(123456.789,2,e.localeCode)}`]),h=ce(()=>ve.currency(123456.789,e.defaultInvoiceCurrencyCode,e.localeCode));function _(){de.settingsController.write(e)}async function fe(){if(i&&i.files&&i.files.length>0){const l=await Ue.convertFileToDataURL(i.files[0]);e.logoData=l,_()}}var V=Ae(),W=a(Ce(V),2),N=r(W),X=r(N),ee=a(r(X),2),g=a(r(ee));g.__change=[m,_];var C=r(g);C.value=((C.__value="")==null,"");var be=a(C);z(be,17,()=>d,J,(l,u)=>{var n=ke(),p={},M=r(n,!0);o(n),D(()=>{p!==(p=c(u).code)&&(n.value=(n.__value=c(u).code)==null?"":c(u).code),U(n,c(u).code==e.localeCode),F(M,c(u).name)}),S(l,n)}),o(g);var ae=a(g,2),ge=a(r(ae));z(ge,17,()=>c(b),J,(l,u)=>{var n=Ze();Q(n,"padding","0 0.5rem");var p=r(n,!0);o(n),D(()=>F(p,c(u))),S(l,n)}),o(ae),o(ee),o(X),o(N);var E=a(N,2),te=r(E),w=a(r(te),2),H=a(r(w));K(H),H.__input=[m,_],o(w);var le=a(w,2),q=a(r(le));K(q),q.__input=[m,_],o(le),o(te),o(E);var re=a(E,2),oe=r(re),k=a(r(oe),2),x=a(r(k));x.__change=[m,_];var I=r(x);I.value=((I.__value="")==null,"");var xe=a(I);z(xe,17,()=>v,J,(l,u)=>{var n=je(),p={},M=r(n,!0);o(n),D(()=>{p!==(p=c(u).code)&&(n.value=(n.__value=c(u).code)==null?"":c(u).code),U(n,c(u).code==e.defaultInvoiceCurrencyCode),F(M,c(u).name)}),S(l,n)}),o(x);var ne=a(x,2),Z=a(r(ne));Q(Z,"padding","0 0.5rem");var ye=r(Z,!0);o(Z),o(ne),o(k);var j=a(k,2),A=a(r(j));P(A),A.__input=[m,_],o(j);var O=a(j,2),R=a(r(O));P(R),R.__input=[m,_],o(O);var T=a(O,2),ie=a(r(T)),Y=r(ie),se=a(Y,2);se.__change=fe,we(se,l=>i=l,()=>i),o(ie),o(T);var $=a(T,2),B=a(r($));K(B),B.__input=[m,_],o($);var ue=a($,2),G=a(r(ue));P(G),G.__input=[m,_],o(ue),o(oe),o(re),o(W),D(()=>{U(C,e.localeCode==""),U(I,e.defaultInvoiceCurrencyCode==""),F(ye,c(h)),Le(Y,"src",e.logoData),Q(Y,"height","6rem")}),_e(g,()=>e.localeCode,l=>e.localeCode=l),f(H,()=>e.cloudSyncHost,l=>e.cloudSyncHost=l),f(q,()=>e.cloudSyncUserId,l=>e.cloudSyncUserId=l),_e(x,()=>e.defaultInvoiceCurrencyCode,l=>e.defaultInvoiceCurrencyCode=l),f(A,()=>e.address,l=>e.address=l),f(R,()=>e.defaultInvoiceHeader,l=>e.defaultInvoiceHeader=l),f(B,()=>e.nextInvoiceNumber,l=>e.nextInvoiceNumber=l),f(G,()=>e.defaultInvoiceFooter,l=>e.defaultInvoiceFooter=l),S(t,V),Ie()}De(["change","input"]);export{Je as component};
