import{a as S,t as L}from"../chunks/CYLZ2iXy.js";import{C as me,p as he,s as a,f as Ce,t as D,a as Ie,c as r,r as o,l as c,y as ce}from"../chunks/DADXHUXo.js";import{s as F}from"../chunks/Dx6yMqZD.js";import{e as P,i as z}from"../chunks/DqwSvHIX.js";import{a as ve,r as J,F as Se,b as U,s as De}from"../chunks/Pm2PPD19.js";import{l as Fe,d as Ue,b as K}from"../chunks/F2U1FVqC.js";import{s as Q}from"../chunks/PwPRnE0L.js";import{b as f}from"../chunks/BLPrS0lv.js";import{i as Le}from"../chunks/Ie9j5a_F.js";import{b as Ne}from"../chunks/48vPxV_Q.js";import{F as de}from"../chunks/C1UJn8Ae.js";import{U as Ee}from"../chunks/C_a7cqMs.js";function pe(t,s,v){if(t.multiple)return He(t,s);for(var d of t.options){var i=y(d);if(Le(i,s)){d.selected=!0;return}}(!v||s!==void 0)&&(t.selectedIndex=-1)}function we(t,s){me(()=>{var v=new MutationObserver(()=>{var d=t.__value;pe(t,d)});return v.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{v.disconnect()}})}function _e(t,s,v=s){var d=!0;Fe(t,"change",i=>{var e=i?"[selected]":":checked",b;if(t.multiple)b=[].map.call(t.querySelectorAll(e),y);else{var h=t.querySelector(e)??t.querySelector("option:not([disabled])");b=h&&y(h)}v(b)}),me(()=>{var i=s();if(pe(t,i,d),d&&i===void 0){var e=t.querySelector(":checked");e!==null&&(i=y(e),v(i))}t.__value=i,d=!1}),we(t)}function He(t,s){for(var v of t.options)v.selected=~s.indexOf(y(v))}function y(t){return"__value"in t?t.__value:t.value}function m(t,s){s()}var qe=L("<option> </option>"),ke=L("<span> </span>"),Ze=L("<option> </option>"),je=L('<h2>Settings</h2> <section><article><details open><summary>General Settings</summary> <label>Locale <select name="locale"><option></option><!></select> <small>Examples: <!></small></label></details></article> <article><details open><summary>Cloud Backup Settings</summary> <label>Host <input name="cloud-host" type="text"></label> <label>User Token <input name="cloud-user" type="text"></label></details></article> <article><details open><summary>Invoice Settings</summary> <label>Default Currency <select name="currency"><option></option><!></select> <small>Example: <span> </span></small></label> <label>Your Address <textarea name="address" autocomplete="address-line1" class="svelte-fggbt6"></textarea></label> <label>Default Invoice Header Lines <textarea name="inv-header" class="svelte-fggbt6"></textarea></label> <label>Your Logo <div style="display: flex; align-items: center; gap: 1rem;"><img alt=""> <input name="inv-logo-file" type="file" accept=".png, .jpg, .jpeg, .svg"></div></label> <label>Next Invoice Number <input name="next-inv-num" type="number" min="1"></label> <label>Default Invoice Footer Lines <textarea name="default-inv-footnote" class="svelte-fggbt6"></textarea></label></details></article></section>',1);function Ke(t,s){he(s,!0);const v=[{code:"en-NZ",name:"English (New Zealand)"},{code:"en-US",name:"English (United States)"},{code:"de-DE",name:"Deutsch"}],d=[{code:"NZD",name:"New Zealand Dollar"},{code:"USD",name:"United States Dollar"},{code:"EUR",name:"Euro"}];let i,e=ve.settingsController.read(),b=ce(()=>[`Date: ${Se.toLocalDate(new Date,e.localeCode)}`,`Numbers: ${de.decimalPlaces(123456.789,2,e.localeCode)}`]),h=ce(()=>de.currency(123456.789,e.defaultInvoiceCurrencyCode,e.localeCode));function _(){ve.settingsController.write(e)}async function fe(){if(i&&i.files&&i.files.length>0){const l=await Ee.convertFileToDataURL(i.files[0]);e.logoData=l,_()}}var V=je(),W=a(Ce(V),2),N=r(W),X=r(N),ee=a(r(X),2),g=a(r(ee));g.__change=[m,_];var C=r(g);C.value=((C.__value="")==null,"");var be=a(C);P(be,17,()=>v,z,(l,u)=>{var n=qe(),p={},M=r(n,!0);o(n),D(()=>{p!==(p=c(u).code)&&(n.value=(n.__value=c(u).code)==null?"":c(u).code),U(n,c(u).code==e.localeCode),F(M,c(u).name)}),S(l,n)}),o(g);var ae=a(g,2),ge=a(r(ae));P(ge,17,()=>c(b),z,(l,u)=>{var n=ke();Q(n,"padding","0 0.5rem");var p=r(n,!0);o(n),D(()=>F(p,c(u))),S(l,n)}),o(ae),o(ee),o(X),o(N);var E=a(N,2),te=r(E),w=a(r(te),2),H=a(r(w));J(H),H.__input=[m,_],o(w);var le=a(w,2),q=a(r(le));J(q),q.__input=[m,_],o(le),o(te),o(E);var re=a(E,2),oe=r(re),k=a(r(oe),2),x=a(r(k));x.__change=[m,_];var I=r(x);I.value=((I.__value="")==null,"");var xe=a(I);P(xe,17,()=>d,z,(l,u)=>{var n=Ze(),p={},M=r(n,!0);o(n),D(()=>{p!==(p=c(u).code)&&(n.value=(n.__value=c(u).code)==null?"":c(u).code),U(n,c(u).code==e.defaultInvoiceCurrencyCode),F(M,c(u).name)}),S(l,n)}),o(x);var ne=a(x,2),Z=a(r(ne));Q(Z,"padding","0 0.5rem");var ye=r(Z,!0);o(Z),o(ne),o(k);var j=a(k,2),A=a(r(j));K(A),A.__input=[m,_],o(j);var O=a(j,2),R=a(r(O));K(R),R.__input=[m,_],o(O);var T=a(O,2),ie=a(r(T)),Y=r(ie),se=a(Y,2);se.__change=fe,Ne(se,l=>i=l,()=>i),o(ie),o(T);var $=a(T,2),B=a(r($));J(B),B.__input=[m,_],o($);var ue=a($,2),G=a(r(ue));K(G),G.__input=[m,_],o(ue),o(oe),o(re),o(W),D(()=>{U(C,e.localeCode==""),U(I,e.defaultInvoiceCurrencyCode==""),F(ye,c(h)),De(Y,"src",e.logoData),Q(Y,"height","6rem")}),_e(g,()=>e.localeCode,l=>e.localeCode=l),f(H,()=>e.cloudSyncHost,l=>e.cloudSyncHost=l),f(q,()=>e.cloudSyncUserId,l=>e.cloudSyncUserId=l),_e(x,()=>e.defaultInvoiceCurrencyCode,l=>e.defaultInvoiceCurrencyCode=l),f(A,()=>e.address,l=>e.address=l),f(R,()=>e.defaultInvoiceHeader,l=>e.defaultInvoiceHeader=l),f(B,()=>e.nextInvoiceNumber,l=>e.nextInvoiceNumber=l),f(G,()=>e.defaultInvoiceFooter,l=>e.defaultInvoiceFooter=l),S(t,V),Ie()}Ue(["change","input"]);export{Ke as component};
