import{a as $,t as J}from"../chunks/CBmAC5jC.js";import{x as K,p as k,s as r,f as ee,t as G,a as ae,c as i,r as s,o as M,v as te}from"../chunks/B3quWTxq.js";import{s as re}from"../chunks/D1LvbsoL.js";import{e as le,i as ne,r as oe,a as x,s as ie}from"../chunks/DvSaprfN.js";import{l as se,d as ue,r as E}from"../chunks/B8pIN4OL.js";import{b as h}from"../chunks/fyUcucyq.js";import{i as ve,p as ce}from"../chunks/DwbFJCge.js";import{b as de}from"../chunks/ECzNSlVg.js";import{F as pe}from"../chunks/DvTEyFA3.js";import{F as _e}from"../chunks/DmIiodil.js";import{s as z}from"../chunks/Co2-gIP7.js";function B(a,t,e,n){var l=a.__styles??(a.__styles={});l[t]!==e&&(l[t]=e,e==null?a.style.removeProperty(t):a.style.setProperty(t,e,""))}function Q(a,t,e){if(a.multiple)return ge(a,t);for(var n of a.options){var l=_(n);if(ve(l,t)){n.selected=!0;return}}(!e||t!==void 0)&&(a.selectedIndex=-1)}function me(a,t){K(()=>{var e=new MutationObserver(()=>{var n=a.__value;Q(a,n)});return e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{e.disconnect()}})}function fe(a,t,e=t){var n=!0;se(a,"change",l=>{var u=l?"[selected]":":checked",v;if(a.multiple)v=[].map.call(a.querySelectorAll(u),_);else{var c=a.querySelector(u)??a.querySelector("option:not([disabled])");v=c&&_(c)}e(v)}),K(()=>{var l=t();if(Q(a,l,n),n&&l===void 0){var u=a.querySelector(":checked");u!==null&&(l=_(u),e(l))}a.__value=l,n=!1}),me(a)}function ge(a,t){for(var e of a.options)e.selected=~t.indexOf(_(e))}function _(a){return"__value"in a?a.__value:a.value}class be{static async convertFileToDataURL(t){return new Promise((e,n)=>{const l=new FileReader;l.onloadend=()=>{const u=l.result;return e(u)},l.onerror=n,l.readAsDataURL(t)})}}function p(a,t){t()}var xe=J("<span> </span>"),he=J('<h2>Settings</h2> <section><article><details open><summary>General Settings</summary> <label>Locale <select name="locale"><option></option><option>New Zealand</option><option>Deutsch</option><option>US</option></select> <small>Examples: <!></small></label></details></article> <article><details open><summary>Invoice Settings</summary> <label>Your Address <textarea name="address" autocomplete="address-line1" class="svelte-fggbt6"></textarea></label> <label>Invoice Header Lines <textarea name="inv-header" class="svelte-fggbt6"></textarea></label> <label>Your Logo <div style="display: flex; align-items: center; gap: 1rem;"><img alt=""> <input name="inv-logo-file" type="file" accept=".png, .jpg, .jpeg, .svg"></div></label> <label>Next Invoice Number <input name="next-inv-num" type="number" min="1"></label> <label>Default Invoice Footer Lines <textarea name="default-inv-footnote" class="svelte-fggbt6"></textarea></label></details></article></section>',1);function Ee(a,t){k(t,!0);let e=ce(z.read()),n,l=te(()=>[`Date: ${pe.toLocalDate(new Date,e.localeCode)}`,`Numbers: ${_e.decimalPlaces(123456789e-2,2,e.localeCode)}`]);function u(){z.write(e)}async function v(){if(n&&n.files&&n.files.length>0){const o=await be.convertFileToDataURL(n.files[0]);e.logoData=o,u()}}var c=he(),P=r(ee(c),2),y=i(P),R=i(y),Z=r(i(R),2),d=r(i(Z));d.__change=[p,u];var m=i(d);m.value=((m.__value="")==null,"");var f=r(m);f.value=(f.__value="en-NZ")==null?"":"en-NZ";var g=r(f);g.value=(g.__value="en-DE")==null?"":"en-DE";var D=r(g);D.value=(D.__value="en-US")==null?"":"en-US",s(d);var A=r(d,2),V=r(i(A));le(V,17,()=>M(l),ne,(o,W)=>{var b=xe();B(b,"padding","0 0.5rem");var X=i(b,!0);s(b),G(()=>re(X,M(W))),$(o,b)}),s(A),s(Z),s(R),s(y);var H=r(y,2),j=i(H),S=r(i(j),2),F=r(i(S));E(F),F.__input=[p,u],s(S);var I=r(S,2),L=r(i(I));E(L),L.__input=[p,u],s(I);var C=r(I,2),O=r(i(C)),N=i(O),T=r(N,2);T.__change=v,de(T,o=>n=o,()=>n),s(O),s(C);var U=r(C,2),w=r(i(U));oe(w),w.__input=[p,u],s(U);var Y=r(U,2),q=r(i(Y));E(q),q.__input=[p,u],s(Y),s(j),s(H),s(P),G(()=>{x(m,(e.localeCode??"")==""),x(f,e.localeCode=="en-NZ"),x(g,e.localeCode=="en-DE"),x(D,e.localeCode=="en-US"),ie(N,"src",e.logoData),B(N,"height","6rem")}),fe(d,()=>e.localeCode,o=>e.localeCode=o),h(F,()=>e.address,o=>e.address=o),h(L,()=>e.invoiceHeader,o=>e.invoiceHeader=o),h(w,()=>e.nextInvoiceNumber,o=>e.nextInvoiceNumber=o),h(q,()=>e.defaultInvoiceFooter,o=>e.defaultInvoiceFooter=o),$(a,c),ae()}ue(["change","input"]);export{Ee as component};
