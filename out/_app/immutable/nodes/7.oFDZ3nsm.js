import{a as I,t as U}from"../chunks/D-9eU7Ls.js";import{C as pe,p as Ce,s as a,f as Ie,t as S,a as Se,c as r,r as n,l as u,y as de}from"../chunks/D_6JOOz4.js";import{l as De,d as Fe,r as J,s as D}from"../chunks/BSibExFq.js";import{e as K,i as Q}from"../chunks/BkIRmUsw.js";import{r as F,a as L,s as Le}from"../chunks/B47jlKa9.js";import{s as V}from"../chunks/PwPRnE0L.js";import{b as p}from"../chunks/C78wupHh.js";import{i as Ue}from"../chunks/Du6CA1sz.js";import{b as Ne}from"../chunks/BkZgBWUW.js";import{a as W,F as Ee,U as He}from"../chunks/DOJJHM71.js";import{F as _e}from"../chunks/C1UJn8Ae.js";function fe(l,c,v){if(l.multiple)return we(l,c);for(var d of l.options){var i=x(d);if(Ue(i,c)){d.selected=!0;return}}(!v||c!==void 0)&&(l.selectedIndex=-1)}function qe(l,c){pe(()=>{var v=new MutationObserver(()=>{var d=l.__value;fe(l,d)});return v.observe(l,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{v.disconnect()}})}function me(l,c,v=c){var d=!0;De(l,"change",i=>{var e=i?"[selected]":":checked",f;if(l.multiple)f=[].map.call(l.querySelectorAll(e),x);else{var y=l.querySelector(e)??l.querySelector("option:not([disabled])");f=y&&x(y)}v(f)}),pe(()=>{var i=c();if(fe(l,i,d),d&&i===void 0){var e=l.querySelector(":checked");e!==null&&(i=x(e),v(i))}l.__value=i,d=!1}),qe(l)}function we(l,c){for(var v of l.options)v.selected=~c.indexOf(x(v))}function x(l){return"__value"in l?l.__value:l.value}function _(){W.saveSettings()}var ke=U("<option> </option>"),Ze=U("<span> </span>"),je=U("<option> </option>"),Ae=U('<h2>Settings</h2> <section><article><details open><summary>General Settings</summary> <label>Label <input name="label" type="text"></label> <label>Locale <select name="locale"><option></option><!></select> <small>Examples: <!></small></label></details></article> <article><details open><summary>Cloud Backup Settings</summary> <label>Host <input name="cloud-host" type="text"></label> <label>User Token <input name="cloud-user" type="text"></label></details></article> <article><details open><summary>Invoice Settings</summary> <label>Default Currency <select name="currency"><option></option><!></select> <small>Example: <span> </span></small></label> <label>Your Address <textarea name="address" autocomplete="address-line1" class="svelte-fggbt6"></textarea></label> <label>Default Invoice Header Lines <textarea name="inv-header" class="svelte-fggbt6"></textarea></label> <label>Your Logo <div style="display: flex; align-items: center; gap: 1rem;"><img alt=""> <input name="inv-logo-file" type="file" accept=".png, .jpg, .jpeg, .svg"></div></label> <label>Next Invoice Number <input name="next-inv-num" type="number" min="1"></label> <label>Default Invoice Footer Lines <textarea name="default-inv-footnote" class="svelte-fggbt6"></textarea></label></details></article></section>',1);function Ke(l,c){Ce(c,!0);const v=[{code:"en-NZ",name:"English (New Zealand)"},{code:"en-US",name:"English (United States)"},{code:"de-DE",name:"Deutsch"}],d=[{code:"NZD",name:"New Zealand Dollar"},{code:"USD",name:"United States Dollar"},{code:"EUR",name:"Euro"}];let i,e=W.settings,f=de(()=>[`Date: ${Ee.toLocalDate(new Date,e.localeCode)}`,`Numbers: ${_e.decimalPlaces(123456.789,2,e.localeCode)}`]),y=de(()=>_e.currency(123456.789,e.defaultInvoiceCurrencyCode,e.localeCode));async function be(){if(i&&i.files&&i.files.length>0){const t=await He.convertFileToDataURL(i.files[0]);e.logoData=t,W.saveSettings()}}var X=Ae(),ee=a(Ie(X),2),N=r(ee),ae=r(N),E=a(r(ae),2),H=a(r(E));F(H),H.__input=[_],n(E);var te=a(E,2),b=a(r(te));b.__change=[_];var h=r(b);h.value=((h.__value="")==null,"");var ge=a(h);K(ge,17,()=>v,Q,(t,s)=>{var o=ke(),m={},z=r(o,!0);n(o),S(()=>{m!==(m=u(s).code)&&(o.value=(o.__value=u(s).code)==null?"":u(s).code),L(o,u(s).code==e.localeCode),D(z,u(s).name)}),I(t,o)}),n(b);var le=a(b,2),xe=a(r(le));K(xe,17,()=>u(f),Q,(t,s)=>{var o=Ze();V(o,"padding","0 0.5rem");var m=r(o,!0);n(o),S(()=>D(m,u(s))),I(t,o)}),n(le),n(te),n(ae),n(N);var q=a(N,2),re=r(q),w=a(r(re),2),k=a(r(w));F(k),k.__input=[_],n(w);var ne=a(w,2),Z=a(r(ne));F(Z),Z.__input=[_],n(ne),n(re),n(q);var oe=a(q,2),ie=r(oe),j=a(r(ie),2),g=a(r(j));g.__change=[_];var C=r(g);C.value=((C.__value="")==null,"");var ye=a(C);K(ye,17,()=>d,Q,(t,s)=>{var o=je(),m={},z=r(o,!0);n(o),S(()=>{m!==(m=u(s).code)&&(o.value=(o.__value=u(s).code)==null?"":u(s).code),L(o,u(s).code==e.defaultInvoiceCurrencyCode),D(z,u(s).name)}),I(t,o)}),n(g);var se=a(g,2),A=a(r(se));V(A,"padding","0 0.5rem");var he=r(A,!0);n(A),n(se),n(j);var O=a(j,2),R=a(r(O));J(R),R.__input=[_],n(O);var T=a(O,2),Y=a(r(T));J(Y),Y.__input=[_],n(T);var $=a(T,2),ue=a(r($)),B=r(ue),ve=a(B,2);ve.__change=be,Ne(ve,t=>i=t,()=>i),n(ue),n($);var G=a($,2),M=a(r(G));F(M),M.__input=[_],n(G);var ce=a(G,2),P=a(r(ce));J(P),P.__input=[_],n(ce),n(ie),n(oe),n(ee),S(()=>{L(h,e.localeCode==""),L(C,e.defaultInvoiceCurrencyCode==""),D(he,u(y)),Le(B,"src",e.logoData),V(B,"height","6rem")}),p(H,()=>e.label,t=>e.label=t),me(b,()=>e.localeCode,t=>e.localeCode=t),p(k,()=>e.cloudSyncHost,t=>e.cloudSyncHost=t),p(Z,()=>e.cloudSyncUserId,t=>e.cloudSyncUserId=t),me(g,()=>e.defaultInvoiceCurrencyCode,t=>e.defaultInvoiceCurrencyCode=t),p(R,()=>e.address,t=>e.address=t),p(Y,()=>e.defaultInvoiceHeader,t=>e.defaultInvoiceHeader=t),p(M,()=>e.nextInvoiceNumber,t=>e.nextInvoiceNumber=t),p(P,()=>e.defaultInvoiceFooter,t=>e.defaultInvoiceFooter=t),I(l,X),Se()}Fe(["input","change"]);export{Ke as component};
