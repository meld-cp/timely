import{a as T,t as A}from"../chunks/disclose-version.wL0fmYXF.js";import{p as D,a7 as m,s as p,f as E,a as J,x as i,a2 as t,c as b,r as _}from"../chunks/runtime.lwdHLtGF.js";import{d as I,b as F}from"../chunks/events.BXY-uptv.js";import{r as P}from"../chunks/attributes.BuGpwIYL.js";import{b as x,a as V}from"../chunks/input.Bkd-6asY.js";import{p as y}from"../chunks/proxy.E1uy1Vwt.js";function $(v,a,s,l,c){try{if(!i(a))throw Error("No data to restore, select a file first");const r=atob(i(a)),o=JSON.parse(r);localStorage.clear();for(const u in o)o.hasOwnProperty(u)&&localStorage.setItem(u,o[u]);alert("Restored successfully!"),t(a,void 0),t(s,void 0),t(l,y(c()))}catch(r){alert(r)}}var q=(v,a)=>a(),z=A('<h2>Backup & Restore</h2> <section><article><textarea name="backup-text" class="svelte-1iwmjr1"></textarea> <button>Backup</button></article></section> <section><article><input name="restore-file" type="file" accept=".timely-backup"> <textarea name="restore-text" class="svelte-1iwmjr1"></textarea> <button>Restore</button></article></section>',1);function W(v,a){D(a,!0);let s=m(y(o())),l=m(void 0),c=m(void 0),r=m(void 0);function o(){return btoa(JSON.stringify(localStorage))}function u(){const e=o(),d=new Blob([e],{type:"text/plain"}),n=document.createElement("a");n.href=URL.createObjectURL(d),n.download=`${new Date().valueOf()}.timely-backup`,n.click(),URL.revokeObjectURL(n.href)}function L(){var n;const e=(n=i(l))==null?void 0:n.item(0);if(!e)return;const d=new FileReader;d.onload=function(j){var B;j.target&&t(c,y((B=j.target.result)==null?void 0:B.toString()))},d.readAsText(e)}var R=z(),g=p(E(R),2),w=b(g),k=b(w);F(k);var U=p(k,2);U.__click=u,_(w),_(g);var S=p(g,2),O=b(S),f=b(O);P(f),f.__change=[q,L];var h=p(f,2);F(h);var N=p(h,2);N.__click=[$,c,r,s,o],_(O),_(S),x(k,()=>i(s),e=>t(s,e)),x(f,()=>i(r),e=>t(r,e)),V(f,()=>i(l),e=>t(l,e)),x(h,()=>i(c),e=>t(c,e)),T(v,R),J()}I(["click","change"]);export{W as component};
